{"ast":null,"code":"var _jsxFileName = \"/Users/jantemmerman/Documents/School/Schijf3/CMSDEV/headlesswpXreact/app/src/pages/login.jsx\";\nimport React from 'react';\nimport styles from '../css/login.module.css';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.lookForToken = () => {\n      if (localStorage.getItem('bearerToken')) {\n        window.alert(\"Already logged in.\");\n        window.location.assign(process.env.REACT_APP_REACT_URL + '/');\n      }\n    };\n\n    this.checkResponse = data => {\n      if (data.token) {\n        localStorage.setItem('bearerToken', data.token);\n        this.setState({\n          errorMessage: \"\"\n        });\n      } else {\n        this.setState({\n          errorMessage: \"Wrong credentials.\"\n        });\n      }\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.state = {\n      username: '',\n      password: '',\n      errorMessage: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.lookForToken();\n  }\n\n  handleSubmit() {\n    fetch('http://localhost:8080/wp/wp-json/jwt-auth/v1/token', {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify({\n        'username': this.state.username,\n        'password': this.state.password\n      })\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      this.checkResponse(data);\n    });\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      method: \"post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      name: \"username\",\n      type: \"text\",\n      value: this.state.username,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"Submit\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, this.state.errorMessage));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/jantemmerman/Documents/School/Schijf3/CMSDEV/headlesswpXreact/app/src/pages/login.jsx"],"names":["React","styles","Login","Component","constructor","props","lookForToken","localStorage","getItem","window","alert","location","assign","process","env","REACT_APP_REACT_URL","checkResponse","data","token","setItem","setState","errorMessage","handleSubmit","bind","handleInputChange","state","username","password","componentDidMount","fetch","method","headers","body","JSON","stringify","then","response","json","event","target","value","name","render"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport styles from '../css/login.module.css'\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props)\n        this.handleSubmit = this.handleSubmit.bind(this)\n        this.handleInputChange = this.handleInputChange.bind(this)\n        this.state = {\n            username: '',\n            password: '',\n            errorMessage: \"\",\n        }\n    }\n\n    componentDidMount() {\n        this.lookForToken()\n    }\n    \n    lookForToken =() => {\n        if(localStorage.getItem('bearerToken')) {\n            window.alert(\"Already logged in.\")\n            window.location.assign(process.env.REACT_APP_REACT_URL + '/'); \n        }\n    }\n\n    handleSubmit() {\n        fetch('http://localhost:8080/wp/wp-json/jwt-auth/v1/token', {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify({\n                'username': this.state.username,\n                'password': this.state.password,\n            }),\n        }).then((response) => {\n            return response.json();\n        }).then((data) => {\n            this.checkResponse(data)\n        });\n    }\n\n    checkResponse = (data) => {\n        if(data.token) {\n            localStorage.setItem('bearerToken', data.token)\n            this.setState({\n                errorMessage: \"\"\n            })\n        } else {\n            this.setState({\n                errorMessage: \"Wrong credentials.\"\n            })\n        }\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n          [name]: value\n        });\n      }\n\n    render() {\n        return (\n            <div>\n                <h1>Login</h1>\n                <form method=\"post\">\n                    <label>Username</label>\n                    <input\n                        name=\"username\"\n                        type=\"text\"\n                        value={this.state.username}\n                        onChange={this.handleInputChange} />\n                    \n                    <br />\n                    <label>Password</label>\n                    <input\n                        name=\"password\"\n                        type=\"password\"\n                        value={this.state.password}\n                        onChange={this.handleInputChange} />\n                </form>\n                <button type='Submit' onClick={this.handleSubmit}>Login</button>\n                <p>{this.state.errorMessage}</p>\n            </div>\n        )\n    }\n}\n\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}